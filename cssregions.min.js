/*! Copyright 2012 Adobe Systems Inc.;
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at

* http://www.apache.org/licenses/LICENSE-2.0

* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
"use script";function myEventStream(e,t,n){var r=this;t||(t=function(){}),n||(n=e);var i=!1,s=!1,o=!1,u=null,a=function(){o=!0;try{u&&u(r)}catch(e){setImmediate(function(){throw e})}o&&l()},f=this.schedule=function(t){if(s)throw new Error("Cannot schedule on a disconnected event stream");if(i&&!o)throw new Error("Cannot schedule on an already-scheduled event stream");u=t,o=!1,i?n(a):(e(a),i=!0)},l=this.dispose=function(){i&&(t(),r=null,a=null,u=null,i=!1,s=!0,o=!1)}}function myAnimationFrameEventStream(e){var t=0;myEventStream.call(this,function(n){t=requestAnimationFrame(n)},function(){cancelAnimationFrame(t)})}function myTimeoutEventStream(e){var t=0,n=typeof e=="number"?+e:"timeout"in e?+e.timeout:333;myEventStream.call(this,function(r){t=setTimeout(r,n)},function(){clearTimeout(t)})}function myMouseEventStream(){var e=this,t="PointerEvent"in window?"pointermove":"MSPointerEvent"in window?"MSPointerMove":"mousemove",n=!1,r=0,i=null,s=function(){if(n)return;window.removeEventListener(t,s,!0),n=requestAnimationFrame(i)};myEventStream.call(this,function(n){i=n,window.addEventListener(t,s,!0)},function(){window.removeEventListener(t,s,!0),cancelAnimationFrame(n),s=null,i=null,n=!1},function(r){i=r,n=!1,window.addEventListener(t,s,!0)})}function myMouseButtonEventStream(){var e=this,t="PointerEvent"in window?"pointerup":"MSPointerEvent"in window?"MSPointerUp":"mouseup",n="PointerEvent"in window?"pointerdown":"MSPointerEvent"in window?"MSPointerDown":"mousedown",r=!1,i=0,s=null,o=function(){if(r)return;window.removeEventListener(t,o,!0),window.removeEventListener(n,o,!0),r=requestAnimationFrame(s)};myEventStream.call(this,function(r){s=r,window.addEventListener(t,o,!0),window.addEventListener(n,o,!0)},function(){window.removeEventListener(t,o,!0),window.removeEventListener(n,o,!0),cancelAnimationFrame(r),o=null,s=null,r=!1},function(i){s=i,r=!1,window.addEventListener(t,o,!0),window.addEventListener(n,o,!0)})}function myFocusEventStream(){var e=this,t=null,n=null,r=!1,i=0,s=function(){n==document.activeElement&&r==document.hasFocus()?setTimeout(s,333):(n=document.activeElement,r=document.hasFocus(),t())};myEventStream.call(this,function(n){t=n,i=setTimeout(s,500)},function(){clearTimeout(i),s=null,t=null,i=0},function(n){t=n,i=setTimeout(s,100)})}function myCompositeEventStream(e,t){var n=this,r=null,i=!1,s=!1,o=function(o){o==e&&(i=!0),o==t&&(s=!0);if(i&&s)return;r(n)};myEventStream.call(this,function(i){r=i,e.schedule(o),t.schedule(o)},function(){e.dispose(),t.dispose()},function(u){r=u,i&&e.schedule(o),s&&t.schedule(o),i=s=!1})}function getCommonAncestor(e){if(!e||!e.length)return null;if(e.length<2)return e[0];var t=e[0];e:while(t&&t.nodeType!=9){var n=e.length;while(--n)if(!t.contains(e[n])){t=t.parentNode;continue e}return t}return null}if(!document.caretRangeFromPoint)if(document.caretPositionFromPoint)document.caretRangeFromPoint=function(t,n){var r=document.createRange(),i=document.caretPositionFromPoint(t,n);return i.offsetNode&&(r.setStart(i.offsetNode,i.offset),r.setEnd(i.offsetNode,i.offset)),r};else if(document.body.createTextRange){var TextRangeUtils={convertToDOMRange:function(e,t){function n(e,n,r){var i=t.createElement("a"),s=n.duplicate();s.collapse(r);var o=s.parentElement();do o.insertBefore(i,i.previousSibling),s.moveToElementText(i);while(s.compareEndPoints(r?"StartToStart":"StartToEnd",n)>0&&i.previousSibling);s.compareEndPoints(r?"StartToStart":"StartToEnd",n)==-1&&i.nextSibling?(s.setEndPoint(r?"EndToStart":"EndToEnd",n),e[r?"setStart":"setEnd"](i.nextSibling,s.text.length)):e[r?"setStartBefore":"setEndBefore"](i),i.parentNode.removeChild(i)}t||(t=window.document);var r=t.createRange();return n(r,e,!0),n(r,e,!1),r},convertFromDOMRange:function(e){function t(e,t,n){var r=t[n?"startContainer":"endContainer"],i=t[n?"startOffset":"endOffset"],s=0,o=DOMUtils.isDataNode(r)?r:r.childNodes[i],u=DOMUtils.isDataNode(r)?r.parentNode:r;if(r.nodeType==3||r.nodeType==4)s=i;var a=t._document.createElement("a");u.insertBefore(a,o);var f=t._document.body.createTextRange();f.moveToElementText(a),a.parentNode.removeChild(a),e.setEndPoint(n?"StartToStart":"EndToStart",f),e[n?"moveStart":"moveEnd"]("character",s)}var n=e._document.body.createTextRange();return t(n,e,!0),t(n,e,!1),n}};document.caretRangeFromPoint=function(t,n){var r=40,i=document.body.createTextRange();for(var s=r;s;s--){var o=t;try{return i.moveToPoint(o,s+n-r),console.log(o+","+s+" from "+t+","+n),TextRangeUtils.convertToDOMRange(i)}catch(u){}}var a=document.elementFromPoint(t,n),i=document.createRange();return i.setStartAfter(a),i}}Range.prototype.myMoveOneCharLeft=function(){var e=this;if(e.endOffset>0){var t=e.endContainer.childNodes[e.endOffset-1];t&&t.lastChild?e.setEndAfter(t.lastChild):t&&t.nodeType==t.TEXT_NODE?e.setEnd(t,t.nodeValue.length):e.setEnd(e.endContainer,e.endOffset-1)}else e.setEndBefore(e.endContainer)},Range.prototype.myMoveOneCharRight=function(){var e=this,t=e.startContainer.nodeType==e.startContainer.TEXT_NODE?e.startContainer.nodeValue.length:e.startContainer.childNodes.length;if(e.startOffset<t){var n=e.endContainer.childNodes[e.endOffset];n&&n.firstChild?e.setStartBefore(n.firstChild):n&&n.nodeType==n.TEXT_NODE&&n.nodeValue!=""?e.setStart(n,0):e.setStart(e.startContainer,e.startOffset+1)}else e.setStartAfter(e.endContainer);e.setEnd(e.startContainer,e.startOffset)},Range.prototype.myMoveEndOneCharLeft=function(){var e=this;if(e.endOffset>0){var t=e.endContainer.childNodes[e.endOffset-1];t&&t.lastChild?e.setEndAfter(t.lastChild):t&&t.nodeType==t.TEXT_NODE?e.setEnd(t,t.nodeValue.length):e.setEnd(e.endContainer,e.endOffset-1)}else e.setEndBefore(e.endContainer)},Range.prototype.myMoveEndOneCharRight=function(){var e=this,t=e.endContainer.nodeType==e.endContainer.TEXT_NODE?e.endContainer.nodeValue.length:e.endContainer.childNodes.length;if(e.endOffset<t){var n=e.endContainer.childNodes[e.endOffset];n&&n.firstChild?e.setEndBefore(n.firstChild):n&&n.nodeType==n.TEXT_NODE?e.setEnd(n,0):e.setEnd(e.endContainer,e.endOffset+1)}else e.setEndAfter(e.endContainer)},Range.prototype.myGetSelectionRect=function(){var e=this.getBoundingClientRect();if(this.collapsed&&e.top===0&&e.bottom===0){var t=this.cloneRange(),n=!1;t.startOffset==0?(t.myMoveOneCharRight(),n=!0,t.setStart(t.endContainer,0)):(t.setStart(this.startContainer,this.startOffset-1),n=!1);var e=t.myGetSelectionRect();return n?{left:e.left,right:e.left,width:0,top:e.top,bottom:e.bottom,height:e.height}:{left:e.right,right:e.right,width:0,top:e.top,bottom:e.bottom,height:e.height}}return e},window.Element||(window.Element=window.HTMLElement),window.Node||(window.Node={}),Node.getBoundingClientRect=function(t){if(t.getBoundingClientRect)return t.getBoundingClientRect();var n=document.createRange();return n.selectNode(t),n.getBoundingClientRect()},Node.getClientRects=function(t){if(t.getBoundingClientRect)return t.getClientRects();var n=document.createRange();return n.selectNode(t),n.getClientRects()},Node.contains=function(t,n){return n.nodeType!=1?n.parentNode?n.parentNode==t||t.contains(n.parentNode):!1:t.contains(n)},Range.prototype.myGetExtensionRect=function(){var e=this.myGetSelectionRect(),t=this.endContainer.childNodes[this.endOffset-1];if(t){var n=Node.getBoundingClientRect(t),r=Math.max(e.bottom,n.bottom);return{left:e.left,right:e.right,width:e.width,top:e.top,bottom:r,height:r-e.top}}return e},"use script";var basicObjectModel={EventTarget:{implementsIn:function(e,t){!t&&typeof e=="function"&&(e=e.prototype),e.dispatchEvent=basicObjectModel.EventTarget.prototype.dispatchEvent,e.addEventListener=basicObjectModel.EventTarget.prototype.addEventListener,e.removeEventListener=basicObjectModel.EventTarget.prototype.removeEventListener},prototype:{}}};basicObjectModel.EventTarget.prototype.addEventListener=function(e,t){this.eventListeners||(this.eventListeners=[]);var n=this.eventListeners[e]||(this.eventListeners[e]=[]);n.indexOf(t)==-1&&n.push(t)},basicObjectModel.EventTarget.prototype.removeEventListener=function(e,t){this.eventListeners||(this.eventListeners=[]);var n=this.eventListeners[e]||(this.eventListeners[e]=[]),r;(r=n.indexOf(t))==-1&&n.splice(r,1)},basicObjectModel.EventTarget.prototype.dispatchEvent=function(e){function n(e,t,n){Object.defineProperty(t,n,{get:function(){var t=e[n];return typeof t=="function"?t.bind(e):t},set:function(t){e[n]=t}})}function r(e,t){try{Object.defineProperty(e,"target",{get:function(){return t}})}catch(i){}finally{if(e.target!==t){var s=Object.create(Object.getPrototypeOf(e));s=r(s,t);for(key in e)key!="target"&&n(e,s,key);return s}return e}}this.eventListeners||(this.eventListeners=[]);if(typeof e=="string"){if(!this.eventListeners[e]||this.eventListeners[e].length==0)return}else if(!this.eventListeners[e.type]||this.eventListeners[e.type].length==0)return;var t=e;if(typeof t=="object")try{t=r(t,this)}catch(i){}else{if(typeof t!="string")throw new Error("dispatchEvent expect an Event object or a string containing the event type");t=document.createEvent("CustomEvent"),t.initCustomEvent(e,!0,!1,this);try{t=r(t,this)}catch(i){}}var s=this.eventListeners[t.type]||(this.eventListeners[t.type]=[]);for(var o=s.length;o--;)try{s[o](t)}catch(i){setImmediate(function(){throw i})}return t.isDefaultPrevented},"use strict";var cssSyntax={tokenize:function(e){},parse:function(e){}};(function(){function t(t){return e(t,48,57)}function n(n){return t(n)||e(n,65,70)||e(n,97,102)}function r(t){return e(t,65,90)}function i(t){return e(t,97,122)}function s(e){return r(e)||i(e)}function o(e){return e>=160}function u(e){return s(e)||o(e)||e==95}function a(e){return u(e)||t(e)||e==45}function f(t){return e(t,0,8)||e(t,14,31)||e(t,127,159)}function l(e){return e==10||e==12}function c(e){return l(e)||e==9||e==32}function h(e){return l(e)||isNaN(e)}function m(e,r){r==undefined&&(r={transformFunctionWhitespace:!1,scientificNotation:!1});var i=-1,s=new d,o="data",v,m,g=0,y=0,P=0,X=function(){g+=1,P=y,y=0},V={line:g,column:y},$=function(t){return t===undefined&&(t=1),e.charCodeAt(i+t)},J=function(t){return t===undefined&&(t=1),i+=t,v=e.charCodeAt(i),l(v)?X():y+=t,!0},K=function(){return i-=1,l(v)?(g-=1,y=P):y-=1,V.line=g,V.column=y,!0},Q=function(){return i>=e.length},G=function(){},Y=function(e){return e?e.finish():e=m.finish(),r.loc===!0&&(e.loc={},e.loc.start={line:V.line,column:V.column},V={line:g,column:y},e.loc.end=V),s.push(e),m=undefined,!0},Z=function(e){return m=e,!0},et=function(){return console.log("Parse error at index "+i+", processing codepoint 0x"+v.toString(16)+" in state "+o+"."),!0},tt=function(e){return console.log("MAJOR SPEC ERROR: "+e),!0},nt=function(e){return o=e,!0},rt=function(){J();if(n(v)){var e=[];for(var t=0;t<6;t++){if(!n(v))break;e.push(v),J()}var r=parseInt(e.map(String.fromCharCode).join(""),16);return r>p&&(r=65533),c(v)||K(),r}return v};for(;;){if(i>e.length*2)return"I'm infinite-looping!";J();switch(o){case"data":if(c(v)){Y(new E);while(c($()))J()}else if(v==34)nt("double-quote-string");else if(v==35)nt("hash");else if(v==39)nt("single-quote-string");else if(v==40)Y(new O);else if(v==41)Y(new M);else if(v==43)t($())||$()==46&&t($(2))?nt("number")&&K():Y(new D(v));else if(v==45)$(1)==45&&$(2)==62?J(2)&&Y(new x):t($())||$(1)==46&&t($(2))?nt("number")&&K():nt("ident")&&K();else if(v==46)t($())?nt("number")&&K():Y(new D(v));else if(v==47)$()==42?J()&&nt("comment"):Y(new D(v));else if(v==58)Y(new T);else if(v==59)Y(new N);else if(v==60)$(1)==33&&$(2)==45&&$(3)==45?J(3)&&Y(new S):Y(new D(v));else if(v==64)nt("at-keyword");else if(v==91)Y(new L);else if(v==92)h($())?et()&&Y(new D(v)):nt("ident")&&K();else if(v==93)Y(new A);else if(v==123)Y(new C);else if(v==125)Y(new k);else if(t(v))nt("number")&&K();else if(v==85||v==117)$(1)==43&&n($(2))?J()&&nt("unicode-range"):nt("ident")&&K();else if(u(v))nt("ident")&&K();else{if(Q())return Y(new _),s;Y(new D(v))}break;case"double-quote-string":m==undefined&&Z(new I),v==34?Y()&&nt("data"):Q()?et()&&Y()&&nt("data")&&K():l(v)?et()&&Y(new b)&&nt("data")&&K():v==92?h($())?et()&&Y(new b)&&nt("data"):l($())?J():m.append(rt()):m.append(v);break;case"single-quote-string":m==undefined&&Z(new I),v==39?Y()&&nt("data"):Q()?et()&&Y()&&nt("data"):l(v)?et()&&Y(new b)&&nt("data")&&K():v==92?h($())?et()&&Y(new b)&&nt("data"):l($())?J():m.append(rt()):m.append(v);break;case"hash":a(v)?Z(new F(v))&&nt("hash-rest"):v==92?h($())?et()&&Y(new D(35))&&nt("data")&&K():Z(new F(rt()))&&nt("hash-rest"):Y(new D(35))&&nt("data")&&K();break;case"hash-rest":a(v)?m.append(v):v==92?h($())?et()&&Y()&&nt("data")&&K():m.append(rt()):Y()&&nt("data")&&K();break;case"comment":v==42?$()==47?J()&&nt("data"):G():Q()?et()&&nt("data")&&K():G();break;case"at-keyword":v==45?u($())?Z(new j(45))&&nt("at-keyword-rest"):$(1)==92&&!h($(2))?Z(new AtKeywordtoken(45))&&nt("at-keyword-rest"):et()&&Y(new D(64))&&nt("data")&&K():u(v)?Z(new j(v))&&nt("at-keyword-rest"):v==92?h($())?et()&&Y(new D(35))&&nt("data")&&K():Z(new j(rt()))&&nt("at-keyword-rest"):Y(new D(64))&&nt("data")&&K();break;case"at-keyword-rest":a(v)?m.append(v):v==92?h($())?et()&&Y()&&nt("data")&&K():m.append(rt()):Y()&&nt("data")&&K();break;case"ident":v==45?u($())?Z(new H(v))&&nt("ident-rest"):$(1)==92&&!h($(2))?Z(new H(v))&&nt("ident-rest"):Y(new D(45))&&nt("data"):u(v)?Z(new H(v))&&nt("ident-rest"):v==92?h($())?et()&&nt("data")&&K():Z(new H(rt()))&&nt("ident-rest"):tt("Hit the generic 'else' clause in ident state.")&&nt("data")&&K();break;case"ident-rest":a(v)?m.append(v):v==92?h($())?et()&&Y()&&nt("data")&&K():m.append(rt()):v==40?m.ASCIImatch("url")?nt("url"):Y(new B(m))&&nt("data"):c(v)&&r.transformFunctionWhitespace?nt("transform-function-whitespace")&&K():Y()&&nt("data")&&K();break;case"transform-function-whitespace":c($())?G():v==40?Y(new B(m))&&nt("data"):Y()&&nt("data")&&K();break;case"number":Z(new R),v==45?t($())?J()&&m.append([45,v])&&nt("number-rest"):$(1)==46&&t($(2))?J(2)&&m.append([45,46,v])&&nt("number-fraction"):nt("data")&&K():v==43?t($())?J()&&m.append([43,v])&&nt("number-rest"):$(1)==46&&t($(2))?J(2)&&m.append([43,46,v])&&nt("number-fraction"):nt("data")&&K():t(v)?m.append(v)&&nt("number-rest"):v==46?t($())?J()&&m.append([46,v])&&nt("number-fraction"):nt("data")&&K():nt("data")&&K();break;case"number-rest":t(v)?m.append(v):v==46?t($())?J()&&m.append([46,v])&&nt("number-fraction"):Y()&&nt("data")&&K():v==37?Y(new U(m))&&nt("data"):v==69||v==101?t($())?J()&&m.append([37,v])&&nt("sci-notation"):$(1)!=43&&$(1)!=45||!t($(2))?Z(new z(m,v))&&nt("dimension"):m.append([37,$(1),$(2)])&&J(2)&&nt("sci-notation"):v==45?u($())?J()&&Z(new z(m,[45,v]))&&nt("dimension"):$(1)==92&&h($(2))?et()&&Y()&&nt("data")&&K():$(1)==92?J()&&Z(new z(m,[45,rt()]))&&nt("dimension"):Y()&&nt("data")&&K():u(v)?Z(new z(m,v))&&nt("dimension"):v==92?h($)?et()&&Y()&&nt("data")&&K():Z(new z(m,rt))&&nt("dimension"):Y()&&nt("data")&&K();break;case"number-fraction":m.type="number",t(v)?m.append(v):v==37?Y(new U(m))&&nt("data"):v==69||v==101?t($())?J()&&m.append([101,v])&&nt("sci-notation"):$(1)!=43&&$(1)!=45||!t($(2))?Z(new z(m,v))&&nt("dimension"):m.append([101,$(1),$(2)])&&J(2)&&nt("sci-notation"):v==45?u($())?J()&&Z(new z(m,[45,v]))&&nt("dimension"):$(1)==92&&h($(2))?et()&&Y()&&nt("data")&&K():$(1)==92?J()&&Z(new z(m,[45,rt()]))&&nt("dimension"):Y()&&nt("data")&&K():u(v)?Z(new z(m,v))&&nt("dimension"):v==92?h($)?et()&&Y()&&nt("data")&&K():Z(new z(m,rt()))&&nt("dimension"):Y()&&nt("data")&&K();break;case"dimension":a(v)?m.append(v):v==92?h($())?et()&&Y()&&nt("data")&&K():m.append(rt()):Y()&&nt("data")&&K();break;case"sci-notation":m.type="number",t(v)?m.append(v):Y()&&nt("data")&&K();break;case"url":Q()?et()&&Y(new w)&&nt("data"):v==34?nt("url-double-quote"):v==39?nt("url-single-quote"):v==41?Y(new q)&&nt("data"):c(v)?G():nt("url-unquoted")&&K();break;case"url-double-quote":m instanceof q||Z(new q),Q()?et()&&Y(new w)&&nt("data"):v==34?nt("url-end"):l(v)?et()&&nt("bad-url"):v==92?l($())?J():h($())?et()&&Y(new w)&&nt("data")&&K():m.append(rt()):m.append(v);break;case"url-single-quote":m instanceof q||Z(new q),Q()?et()&&Y(new w)&&nt("data"):v==39?nt("url-end"):l(v)?et()&&nt("bad-url"):v==92?l($())?J():h($())?et()&&Y(new w)&&nt("data")&&K():m.append(rt()):m.append(v);break;case"url-end":Q()?et()&&Y(new w)&&nt("data"):c(v)?G():v==41?Y()&&nt("data"):et()&&nt("bad-url")&&K();break;case"url-unquoted":m instanceof q||Z(new q),Q()?et()&&Y(new w)&&nt("data"):c(v)?nt("url-end"):v==41?Y()&&nt("data"):v==34||v==39||v==40||f(v)?et()&&nt("bad-url"):v==92?h($())?et()&&nt("bad-url"):m.append(rt()):m.append(v);break;case"bad-url":Q()?et()&&Y(new w)&&nt("data"):v==41?Y(new w)&&nt("data"):v==92?h($())?G():rt():G();break;case"unicode-range":var it=[v],st=[v];for(var ot=1;ot<6;ot++){if(!n($()))break;J(),it.push(v),st.push(v)}if($()==63){for(;ot<6;ot++){if($()!=63)break;J(),it.push("0".charCodeAt(0)),st.push("f".charCodeAt(0))}Y(new W(it,st))&&nt("data")}else if($(1)==45&&n($(2))){J(),J(),st=[v];for(var ot=1;ot<6;ot++){if(!n($()))break;J(),st.push(v)}Y(new W(it,st))&&nt("data")}else Y(new W(it))&&nt("data");break;default:tt("Unknown state '"+o+"'")}}}function g(e){return String.fromCharCode.apply(null,e.filter(function(e){return e}))}var e=function(e,t,n){return e>=t&&e<=n},p=1114111,d=cssSyntax.TokenList=function(){var t=[];return t.toCSSString=cssSyntax.TokenListToCSSString,t},v=cssSyntax.TokenListToCSSString=function(t){return t?this.map(function(e){return e.toCSSString()}).join(t):this.asCSSString||(this.asCSSString=this.map(function(e){return e.toCSSString()}).join("/**/").replace(/( +\/\*\*\/ *| * | *\/\*\*\/ +)/g," ").replace(/( +\/\*\*\/ *| * | *\/\*\*\/ +)/g," ").replace(/(\!|\:|\;|\@|\.|\,|\*|\=|\&|\\|\/|\<|\>|\[|\{|\(|\]|\}|\)|\|)\/\*\*\//g,"$1").replace(/\/\*\*\/(\!|\:|\;|\@|\.|\,|\*|\=|\&|\\|\/|\<|\>|\[|\{|\(|\]|\}|\)|\|)/g,"$1"))},y=cssSyntax.CSSParserToken=function(t){return this};y.prototype.finish=function(){return this},y.prototype.toString=function(){return this.tokenType},y.prototype.toJSON=function(){return this.toString()},y.prototype.toCSSString=function(){return this.toString()};var b=cssSyntax.BadStringToken=function(){return this};b.prototype=new y,b.prototype.tokenType="BADSTRING",b.prototype.toCSSString=function(){return"'"};var w=cssSyntax.BadURLToken=function(){return this};w.prototype=new y,w.prototype.tokenType="BADURL",w.prototype.toCSSString=function(){return"url("};var E=cssSyntax.WhitespaceToken=function(){return this};E.prototype=new y,E.prototype.tokenType="WHITESPACE",E.prototype.toString=function(){return"WS"},E.prototype.toCSSString=function(){return" "};var S=cssSyntax.CDOToken=function(){return this};S.prototype=new y,S.prototype.tokenType="CDO",S.prototype.toCSSString=function(){return"<!--"};var x=cssSyntax.CDCToken=function(){return this};x.prototype=new y,x.prototype.tokenType="CDC",S.prototype.toCSSString=function(){return"-->"};var T=cssSyntax.ColonToken=function(){return this};T.prototype=new y,T.prototype.tokenType=":";var N=cssSyntax.SemicolonToken=function(){return this};N.prototype=new y,N.prototype.tokenType=";";var C=cssSyntax.OpenCurlyToken=function(){return this};C.prototype=new y,C.prototype.tokenType="{";var k=cssSyntax.CloseCurlyToken=function(){return this};k.prototype=new y,k.prototype.tokenType="}";var L=cssSyntax.OpenSquareToken=function(){return this};L.prototype=new y,L.prototype.tokenType="[";var A=cssSyntax.CloseSquareToken=function(){return this};A.prototype=new y,A.prototype.tokenType="]";var O=cssSyntax.OpenParenToken=function(){return this};O.prototype=new y,O.prototype.tokenType="(";var M=cssSyntax.CloseParenToken=function(){return this};M.prototype=new y,M.prototype.tokenType=")";var _=cssSyntax.EOFToken=function(){return this};_.prototype=new y,_.prototype.tokenType="EOF",_.prototype.toCSSString=function(){return""};var D=cssSyntax.DelimToken=function(t){return this.value=String.fromCharCode(t),this};D.prototype=new y,D.prototype.tokenType="DELIM",D.prototype.toString=function(){return"DELIM("+this.value+")"},D.prototype.toCSSString=function(){return this.value};var P=cssSyntax.StringValuedToken=function(){return this};P.prototype=new y,P.prototype.append=function(e){if(e instanceof Array)for(var t=0;t<e.length;t++)this.value.push(e[t]);else this.value.push(e);return!0},P.prototype.finish=function(){return this.value=this.valueAsString(),this},P.prototype.ASCIImatch=function(e){return this.valueAsString().toLowerCase()==e.toLowerCase()},P.prototype.valueAsString=function(){return typeof this.value=="string"?this.value:g(this.value)},P.prototype.valueAsCodes=function(){if(typeof this.value=="string"){var e=[];for(var t=0;t<this.value.length;t++)e.push(this.value.charCodeAt(t));return e}return this.value.filter(function(e){return e})};var H=cssSyntax.IdentifierToken=function(t){this.value=new d,this.append(t)};H.prototype=new P,H.prototype.tokenType="IDENT",H.prototype.toString=function(){return"IDENT("+this.value+")"},H.prototype.toCSSString=function(){return this.value};var B=cssSyntax.FunctionToken=function(t){this.value=t.finish().value};B.prototype=new P,B.prototype.tokenType="FUNCTION",B.prototype.toString=function(){return"FUNCTION("+this.value+")"},B.prototype.toCSSString=function(){return this.value+"("};var j=cssSyntax.AtKeywordToken=function(t){this.value=new d,this.append(t)};j.prototype=new P,j.prototype.tokenType="AT-KEYWORD",j.prototype.toString=function(){return"AT("+this.value+")"},j.prototype.toCSSString=function(){return"@"+this.value};var F=cssSyntax.HashToken=function(t){this.value=new d,this.append(t)};F.prototype=new P,F.prototype.tokenType="HASH",F.prototype.toString=function(){return"HASH("+this.value+")"},F.prototype.toCSSString=function(){return"#"+this.value};var I=cssSyntax.StringToken=function(t){this.value=new d,this.append(t)};I.prototype=new P,I.prototype.tokenType="STRING",I.prototype.toString=function(){return'"'+this.value+'"'},I.prototype.toCSSString=function(){return'"'+this.value.replace(/"/g,'\\"')+'"'};var q=cssSyntax.URLToken=function(t){this.value=new d,this.append(t)};q.prototype=new P,q.prototype.tokenType="URL",q.prototype.toString=function(){return"URL("+this.value+")"},q.prototype.toCSSString=function(){return'url("'+this.value.replace(/"/g,'\\"')+'")'};var R=cssSyntax.NumberToken=function(t){this.value=new d,this.append(t),this.type="integer"};R.prototype=new P,R.prototype.tokenType="NUMBER",R.prototype.toString=function(){return this.type=="integer"?"INT("+this.value+")":"NUMBER("+this.value+")"},R.prototype.finish=function(){return this.repr=this.valueAsString(),this.value=this.repr*1,Math.abs(this.value)%1!=0&&(this.type="number"),this},R.prototype.toCSSString=function(){return""+this.value};var U=cssSyntax.PercentageToken=function(t){t.finish(),this.value=t.value,this.repr=t.repr};U.prototype=new y,U.prototype.tokenType="PERCENTAGE",U.prototype.toString=function(){return"PERCENTAGE("+this.value+")"},U.prototype.toCSSString=function(){return this.value+"%"};var z=cssSyntax.DimensionToken=function(t,n){t.finish(),this.num=t.value,this.unit=[],this.repr=t.repr,this.append(n)};z.prototype=new y,z.prototype.tokenType="DIMENSION",z.prototype.toString=function(){return"DIM("+this.num+","+this.unit+")"},z.prototype.toCSSString=function(){return this.num+this.unit},z.prototype.append=function(e){if(e instanceof Array)for(var t=0;t<e.length;t++)this.unit.push(e[t]);else this.unit.push(e);return!0},z.prototype.finish=function(){return this.unit=g(this.unit),this.repr+=this.unit,this};var W=cssSyntax.UnicodeRangeToken=function(t,n){return t=parseInt(g(t),16),n===undefined?n=t+1:n=parseInt(g(n),16),t>p&&(n=t),n<t&&(n=t),n>p&&(n=p),this.start=t,this.end=n,this};W.prototype=new y,W.prototype.tokenType="UNICODE-RANGE",W.prototype.toCSSString=function(){return"Â¿"},W.prototype.toString=function(){return this.start+1==this.end?"UNICODE-RANGE("+this.start.toString(16).toUpperCase()+")":this.start<this.end?"UNICODE-RANGE("+this.start.toString(16).toUpperCase()+"-"+this.end.toString(16).toUpperCase()+")":"UNICODE-RANGE()"},W.prototype.contains=function(e){return e>=this.start&&e<this.end},cssSyntax.tokenize=m})(),function(){function t(e){function x(){switch(l.tokenType){case"(":case"[":case"{":return T();case"FUNCTION":return N();default:return l}}function T(){var e={"(":")","[":"]","{":"}"}[l.tokenType],t=new u(l.tokenType);for(;;){d();switch(l.tokenType){case"EOF":case e:return t;default:t.append(x())}}}function N(){var e=new a(l.value),t=new f;for(;;){d();switch(l.tokenType){case"EOF":case")":return e.append(t),e;case"DELIM":l.value==","?(e.append(t),t=new f):t.append(l);break;default:t.append(x())}}}typeof e=="string"&&(e=cssSyntax.tokenize(e));var t="top-level",n=-1,l,c=new r,h=[c],p=h[0],d=function(t){return t===undefined&&(t=1),n+=t,n<e.length?l=e[n]:l=new EOFToken,!0},v=function(){return n--,!0},m=function(){return e[n+1]},g=function(e){return e===undefined?p.fillType!==""?t=p.fillType:p.type=="STYLESHEET"?t="top-level":(console.log("Unknown rule-type while switching to current rule's content mode: ",p),t=""):t=e,!0},y=function(e){return p=e,h.push(p),!0},b=function(e){return console.log("Parse error at token "+n+": "+l+".\n"+e),!0},w=function(){var e=h.pop();return p=h[h.length-1],p.append(e),!0},E=function(){return h.pop(),p=h[h.length-1],!0},S=function(){while(h.length>1)w()};for(;;){d();switch(t){case"top-level":switch(l.tokenType){case"CDO":case"CDC":case"WHITESPACE":break;case"AT-KEYWORD":y(new i(l.value))&&g("at-rule");break;case"{":b("Attempt to open a curly-block at top-level.")&&x();break;case"EOF":return S(),c;default:y(new s)&&g("selector")&&v()}break;case"at-rule":switch(l.tokenType){case";":w()&&g();break;case"{":p.fillType!==""?g(p.fillType):b("Attempt to open a curly-block in a statement-type at-rule.")&&E()&&g("next-block")&&v();break;case"EOF":return S(),c;default:p.appendPrelude(x())}break;case"rule":switch(l.tokenType){case"WHITESPACE":break;case"}":w()&&g();break;case"AT-KEYWORD":y(new i(l.value))&&g("at-rule");break;case"EOF":return S(),c;default:y(new s)&&g("selector")&&v()}break;case"selector":switch(l.tokenType){case"{":g("declaration");break;case"EOF":return E()&&S(),c;default:p.appendSelector(x())}break;case"declaration":switch(l.tokenType){case"WHITESPACE":case";":break;case"}":w()&&g();break;case"AT-RULE":y(new i(l.value))&&g("at-rule");break;case"IDENT":y(new o(l.value))&&g("after-declaration-name");break;case"EOF":return S(),c;default:b()&&E()&&g("next-declaration")}break;case"after-declaration-name":switch(l.tokenType){case"WHITESPACE":break;case":":g("declaration-value");break;case";":b("Incomplete declaration - semicolon after property name.")&&E()&&g();break;case"EOF":return E()&&S(),c;default:b("Invalid declaration - additional token after property name")&&E()&&g("next-declaration")}break;case"declaration-value":switch(l.tokenType){case"DELIM":l.value=="!"&&m().tokenType=="IDENT"&&m().value.toLowerCase()=="important"?(d(),p.important=!0,g("declaration-end")):p.append(l);break;case";":w()&&g();break;case"}":w()&&w()&&g();break;case"EOF":return S(),c;default:p.append(x())}break;case"declaration-end":switch(l.tokenType){case"WHITESPACE":break;case";":w()&&g();break;case"}":w()&&w()&&g();break;case"EOF":return S(),c;default:b("Invalid declaration - additional token after !important.")&&E()&&g("next-declaration")}break;case"next-block":switch(l.tokenType){case"{":x()&&g();break;case"EOF":return S(),c;default:x()}break;case"next-declaration":switch(l.tokenType){case";":g("declaration");break;case"}":g("declaration")&&v();break;case"EOF":return S(),c;default:x()}break;default:console.log("Unknown parsing mode: "+t);return}}}var e=cssSyntax.TokenList,n=cssSyntax.CSSParserRule=function(){return this};n.prototype.fillType="",n.prototype.toString=function(e){return JSON.stringify(this.toJSON(),null,e)},n.prototype.append=function(e){return this.value.push(e),this};var r=cssSyntax.Stylesheet=function(){return this.value=new e,this};r.prototype=new n,r.prototype.type="STYLESHEET",r.prototype.toJSON=function(){return{type:"stylesheet",value:this.value.map(function(e){return e.toJSON()})}},r.prototype.toCSSString=function(){return this.value.toCSSString("\n")};var i=cssSyntax.AtRule=function l(t){return this.name=t,this.prelude=new e,this.value=new e,t in l.registry&&(this.fillType=l.registry[t]),this};i.prototype=new n,i.prototype.type="AT-RULE",i.prototype.appendPrelude=function(e){return this.prelude.push(e),this},i.prototype.toJSON=function(){return{type:"at",name:this.name,prelude:this.prelude.map(function(e){return e.toJSON()}),value:this.value.map(function(e){return e.toJSON()})}},i.prototype.toCSSString=function(){return this.fillType!=""?"@"+this.name+" "+this.prelude.toCSSString()+"{"+this.value.toCSSString()+"} ":"@"+this.name+" "+this.prelude.toCSSString()+"; "},i.registry={"import":"",media:"rule","font-face":"declaration",page:"declaration",keyframes:"rule",namespace:"","counter-style":"declaration",supports:"rule",document:"rule","font-feature-values":"declaration",viewport:"","region-style":"rule"};var s=cssSyntax.StyleRule=function(){return this.selector=new e,this.value=new e,this};s.prototype=new n,s.prototype.type="STYLE-RULE",s.prototype.fillType="declaration",s.prototype.appendSelector=function(e){return this.selector.push(e),this},s.prototype.toJSON=function(){return{type:"selector",selector:this.selector.map(function(e){return e.toJSON()}),value:this.value.map(function(e){return e.toJSON()})}},s.prototype.toCSSString=function(){return this.selector.toCSSString()+"{"+this.value.toCSSString()+"} "};var o=cssSyntax.Declaration=function(n){return this.name=n,this.value=new e,this};o.prototype=new n,o.prototype.type="DECLARATION",o.prototype.toJSON=function(){return{type:"declaration",name:this.name,value:this.value.map(function(e){return e.toJSON()})}},o.prototype.toCSSString=function(){return this.name+":"+this.value.toCSSString()+"; "};var u=cssSyntax.SimpleBlock=function(n){return this.name=n,this.value=new e,this};u.prototype=new n,u.prototype.type="BLOCK",u.prototype.toJSON=function(){return{type:"block",name:this.name,value:this.value.map(function(e){return e.toJSON()})}},u.prototype.toCSSString=function(){switch(this.name){case"(":return"("+this.value.toCSSString()+")";case"[":return"["+this.value.toCSSString()+"]";case"{":return"{"+this.value.toCSSString()+"}";default:return this.name+this.value.toCSSString()+this.name}};var a=cssSyntax.Func=function(n){return this.name=n,this.value=new e,this};a.prototype=new n,a.prototype.type="FUNCTION",a.prototype.toJSON=function(){return{type:"func",name:this.name,value:this.value.map(function(e){return e.toJSON()})}},a.prototype.toCSSString=function(){return this.name+"("+this.value.toCSSString().slice(0,-2)+")"};var f=cssSyntax.FuncArg=function(){return this.value=new e,this};f.prototype=new n,f.prototype.type="FUNCTION-ARG",f.prototype.toJSON=function(){return this.value.map(function(e){return e.toJSON()})},f.prototype.toCSSString=function(){return this.value.toCSSString()+", "},cssSyntax.parse=t}();var cssCascade={computeSelectorPriorityOf:function(t){typeof t=="string"&&(t=cssSyntax.parse(t+"{}").value[0].selector);var n=0,r=0,i=0;for(var s=0;s<t.length;s++)if(t[s]instanceof cssSyntax.IdentifierToken)i++;else if(t[s]instanceof cssSyntax.DelimToken)t[s].value=="."&&(r++,s++);else if(t[s]instanceof cssSyntax.ColonToken)if(t[++s]instanceof cssSyntax.ColonToken)i++,s++;else if(t[s]instanceof cssSyntax.Func&&/^(not|matches)$/i.test(t[s].name)){var o=this.computeSelectorPriorityOf(t[s].value[0].value);i+=o%256,o/=256,r+=o%256,o/=256,n+=o}else r++;else t[s]instanceof cssSyntax.SimpleBlock?t[s].name=="["&&r++:t[s]instanceof cssSyntax.HashToken&&n++;return n>255&&(numberOfIds=255),r>255&&(r=255),i>255&&(i=255),(n*256+r)*256+i},findAllMatchingRules:function(t){function r(e){for(var i=e.length;i--;){var s=e[i];if(s.disabled)continue;if(s instanceof cssSyntax.StyleRule){var o=s.subRules||cssCascade.splitRule(s);for(var u=o.length;u--;){var a=!1;try{if(t.matchesSelector)a=t.matchesSelector(o[u].selector.toCSSString());else if(t.oMatchesSelector)a=t.oMatchesSelector(o[u].selector.toCSSString());else if(t.msMatchesSelector)a=t.msMatchesSelector(o[u].selector.toCSSString());else if(t.mozMatchesSelector)a=t.mozMatchesSelector(o[u].selector.toCSSString());else{if(!t.webkitMatchesSelector)throw new Error("wft u no element.matchesSelector?");a=t.webkitMatchesSelector(o[u].selector.toCSSString())}}catch(f){debugger;setImmediate(function(){throw f})}a&&n.push(o[u])}}else s instanceof cssSyntax.AtRule&&s.name=="media"&&r(s.value)}}var n=[];for(var i=cssCascade.stylesheets.length;i--;){var s=cssCascade.stylesheets[i];r(s)}return n},getSpecifiedStyle:function(t,n,r){if(t.currentStyle){var i=t.currentStyle[n];return i?cssSyntax.parse("*{a:"+i+"}").value[0].value[0].value:new cssSyntax.TokenList}if(i=t.style.getPropertyValue(n))return cssSyntax.parse("*{a:"+i+"}").value[0].value[0].value;var s=!1,o=0,i=new cssSyntax.TokenList,u=r||(n in cssCascade.monitoredProperties?t.myMatchedRules||[]:cssCascade.findAllMatchingRules(t));function a(e){for(var t=e.length;t--;){if(e[t].disabled)continue;if(e[t]instanceof cssSyntax.StyleRule){var r=e[t].value;for(var u=r.length-1;u>=0;u--)if(r[u].type=="DECLARATION"&&r[u].name==n){var f=cssCascade.computeSelectorPriorityOf(e[t].selector);s?r[u].important&&f>=o&&(o=f,i=r[u].value):r[u].important?(s=!0,o=f,i=r[u].value):f>=o&&(o=f,i=r[u].value)}}else e[t]instanceof cssSyntax.AtRule&&e[t].name=="media"&&a(e[t].value)}}return a(u),i},stylesheets:[],loadStyleSheet:function(t,n){var r=cssSyntax.parse(t).value;typeof n!="undefined"?cssCascade.stylesheets[n]=r:n=cssCascade.stylesheets.push(r),cssCascade.startMonitoringStylesheet(r)},loadStyleSheetTag:function(t,n){if(t.hasAttribute("data-css-polyfilled"))return;if(t.tagName=="LINK")try{cssCascade.stylesheets[n]=new cssSyntax.TokenList;var r=new XMLHttpRequest;r.href=t.href,r.open("GET",t.href,!0),r.ruleIndex=n,r.onreadystatechange=function(){this.readyState==4&&(this.status==200||this.status==0?cssCascade.loadStyleSheet(this.responseText,this.ruleIndex):console.log("css-cascade polyfill failled to load: "+this.href))},r.send()}catch(i){console.log("css-cascade polyfill failled to load: "+t.href)}else cssCascade.loadStyleSheet(t.textContent,n);t.setAttribute("data-css-polyfilled",!0)},selectorForStylesheets:"style:not([data-no-css-polyfill]):not([data-css-polyfilled]), link[rel=stylesheet]:not([data-no-css-polyfill]):not([data-css-polyfilled])",loadAllStyleSheets:function(){var t=document.head||document.documentElement,n=t.querySelectorAll(cssCascade.selectorForStylesheets),r=this.stylesheets.length;this.stylesheets.length+=n.length;for(var i=n.length;i--;){var s=n[i];cssCascade.loadStyleSheetTag(s,r+i)}},monitoredProperties:Object.create?Object.create(null):{},monitoredPropertiesHandler:{onupdate:function(e,t){var n=cssCascade.monitoredProperties,r=t.value;for(var i=r.length-1;i>=0;i--)if(r[i].type=="DECLARATION"&&r[i].name in n){var s=n[r[i].name];for(var o=s.length;o--;)s[o].onupdate(e,t);break}}},startMonitoringProperties:function(t,n){for(var r=t.length;r--;){var i=t[r],s=cssCascade.monitoredProperties[i]||(cssCascade.monitoredProperties[i]=[]);s.push(n)}for(var o=0;o<cssCascade.stylesheets.length;o++){var u=cssCascade.stylesheets[o];cssCascade.startMonitoringStylesheet(u)}},startMonitoringStylesheet:function(t){for(var n=0;n<t.length;n++)if(t[n]instanceof cssSyntax.StyleRule){if(t[n].isMonitored)continue;var r=t[n].value;for(var i=r.length-1;i>=0;i--)if(r[i].type=="DECLARATION"&&r[i].name in cssCascade.monitoredProperties){cssCascade.startMonitoringRule(t[n]);break}}else t[n]instanceof cssSyntax.AtRule&&t[n].name=="media"&&window.matchMedia&&cssCascade.startMonitoringMedia(t[n])},startMonitoringMedia:function(t){try{var n=window.matchMedia(t.prelude.toCSSString());cssCascade.updateMedia(t.value,!n.matches,!1),n.addListener(function(e){cssCascade.updateMedia(t.value,!e.matches,!0)}),cssCascade.startMonitoringStylesheet(t.value)}catch(r){setImmediate(function(){throw r})}},updateMedia:function(e,t,n){for(var r=e.length;r--;){e[r].disabled=t;var i=e[r].subRules;if(i)for(var s=i.length;s--;)i[s].disabled=t}if(n)for(var r=e.length;r--;){var o=document.querySelectorAll(e[r].selector.toCSSString());for(var s=o.length;s--;)cssCascade.monitoredPropertiesHandler.onupdate(o[s],e[r])}},splitRule:function(t){var n=[],r=new cssSyntax.StyleRule;r.disabled=t.disabled;for(var i=0;i<t.selector.length;i++)t.selector[i]instanceof cssSyntax.DelimToken&&t.selector[i].value==","?(r.value=t.value,n.push(r),r=new cssSyntax.StyleRule,r.disabled=t.disabled):r.selector.push(t.selector[i]);return r.value=t.value,n.push(r),t.subRules=n},startMonitoringRule:function(t){if(!!t.isMonitored)return;t.isMonitored=!0;var n=t.subRules||cssCascade.splitRule(t);for(var r=0;r<n.length;r++)t=n[r],myQuerySelectorLive(t.selector.toCSSString(),{onadded:function(e){(e.myMatchedRules=e.myMatchedRules||[]).push(t),cssCascade.monitoredPropertiesHandler.onupdate(e,t)},onremoved:function(e){e.myMatchedRules&&e.myMatchedRules.splice(e.myMatchedRules.indexOf(t),1),cssCascade.monitoredPropertiesHandler.onupdate(e,t)}})}};basicObjectModel.EventTarget.implementsIn(cssCascade),cssCascade.loadAllStyleSheets(),document.addEventListener("DOMContentLoaded",function(){cssCascade.loadAllStyleSheets(),window.myQuerySelectorLive&&window.myQuerySelectorLive(cssCascade.selectorForStylesheets,{onadded:function(e){cssCascade.loadStyleSheetTag(e),cssCascade.dispatchEvent("stylesheetadded")}})}),"use strict",window.setImmediate=window.setImmediate||function(e){setTimeout(e,0)},window.requestAnimationFrame=window.requestAnimationFrame||function(e){return setTimeout(function(){e(+(new Date))},16)},window.cancelAnimationFrame=window.cancelAnimationFrame||window.clearTimeout;var myDOMUpdateEventStream;"MutationObserver"in window?myDOMUpdateEventStream=function(t){if(t)var n="target"in t?t.target:document.documentElement,r={subtree:"subtree"in t?!!t.subtree:!0,attributes:"attributes"in t?!!t.attributes:!0,childList:"childList"in t?!!t.childList:!0,characterData:"characterData"in t?!!t.characterData:!1};else var n=document.documentElement,r={subtree:!0,attributes:!0,childList:!0,characterData:!1};var i=null;myEventStream.call(this,function(t){r&&(i=new MutationObserver(t),i.observe(n,r),n=null,r=null)},function(){i&&i.disconnect(),i=null},function(){i.takeRecords()})}:"MutationEvent"in window?myDOMUpdateEventStream=function(t){var n=this,r=!1;if(t)var i="target"in t?t.target:document.documentElement;else var i=document.documentElement;var s=null,o=function(){if(r||!o)return;document.removeEventListener("DOMContentLoaded",o,!1),document.removeEventListener("DOMContentLoaded",o,!1),i.removeEventListener("DOMSubtreeModified",o,!1),r=requestAnimationFrame(s)};myEventStream.call(this,function(t){s=t,document.addEventListener("DOMContentLoaded",o,!1),i.addEventListener("DOMSubtreeModified",o,!1)},function(){document.removeEventListener("DOMContentLoaded",o,!1),i.removeEventListener("DOMSubtreeModified",o,!1),cancelAnimationFrame(r),o=null,s=null,r=!1},function(t){s=t,r=!1,i.addEventListener("DOMSubtreeModified",o,!1)})}:myDOMUpdateEventStream=myAnimationFrameEventStream,window.myQuerySelectorLive=function(e,t,n){var n=n||document,r=[],i=function a(i){i.schedule(a);var s=[],o=r.slice(0),u=n.querySelectorAll(e);for(var f=s.length=u.length;f;)s.push(u[--f]);r=s.slice(0),u=null;var l=o.pop(),c=s.pop();while(l||c)if(l===c)l=o.pop(),c=s.pop();else if(c&&(!l||(c.compareDocumentPosition(l)&43)===0)){try{t.onadded&&t.onadded(c)}catch(h){setImmediate(function(){throw h})}c=s.pop()}else{try{t.onremoved&&t.onremoved(l)}catch(h){setImmediate(function(){throw h})}l=o.pop()}},s=e.replace(/:(dir|lang|root|empty|blank|nth-child|nth-last-child|first-child|last-child|only-child|nth-of-type|nth-last-of-child|fist-of-type|last-of-type|only-of-type|not|matches|default)\b/gi,""),o;if(s.indexOf(":")==-1)o=new myDOMUpdateEventStream(n);else{o=new myDOMUpdateEventStream(n);if(myDOMUpdateEventStream!=myAnimationFrameEventStream){var u=/:(focus|active)\b/gi;if(u.test(s)){o=new myCompositeEventStream(new myFocusEventStream,o);var u=/:(focus)\b/gi;s=s.replace(u,"")}var u=/:(active)\b/gi;u.test(s)&&(o=new myCompositeEventStream(new myMouseButtonEventStream,o),s=s.replace(u,""));var u=/:(target|checked|indeterminate|valid|invalid|in-range|out-of-range|user-error)\b/gi;if(u.test(s)){o=new myCompositeEventStream(new myTimeoutEventStream(250),o),s=s.replace(u,"");var u=/:(any-link|link|visited|local-link|enabled|disabled|read-only|read-write|required|optional)\b/gi;s=s.replace(u,"")}var u=/:(any-link|link|visited|local-link|enabled|disabled|read-only|read-write|required|optional)\b/gi;u.test(s)&&(o=new myCompositeEventStream(new myTimeoutEventStream(333),o),s=s.replace(u,""));var u=/:(hover)\b/gi;u.test(s)&&(o=new myCompositeEventStream(new myMouseEventStream,o),s=s.replace(u,"")),s.indexOf(":")!==-1&&(o=new myAnimationFrameEventStream)}}i(o)},"use strict";var cssBreak={isReplacedElement:function(t){if(t instanceof Element){var n=/^(SVG|MATH|IMG|VIDEO|OBJECT|EMBED|IFRAME|TEXTAREA|BUTTON|INPUT)$/;return n.test(t.tagName)}return!1},isScrollable:function(t,n){return t instanceof Element?(typeof n=="undefined"&&(n=getComputedStyle(t).overflow),n!=="visible"&&n!=="hidden"):!1},isSingleLineOfTextComponent:function(e,t,n,r,i){return e instanceof Element?(typeof t=="undefined"&&(t=getComputedStyle(e)),typeof n=="undefined"&&(n=t.display),typeof r=="undefined"&&(r=t.position),typeof i=="undefined"&&(i=this.isReplacedElement(e)),(n==="inline-block"||n==="inline-table"||n==="inline-flex"||n==="inline-grid")&&(r==="static"||r==="relative")):!0},hasAnyInlineFlow:function(e){function t(e){return e instanceof Element?!cssBreak.isOutOfFlowElement(e)&&cssBreak.isSingleLineOfTextComponent(e):!/^\s*$/.test(e.nodeValue)}var n=e.firstChild;while(n){if(t(n))return!0;n=n.nextSibling}return!1},isLineBreakingElement:function(e,t,n,r){return e instanceof Element?(typeof t=="undefined"&&(t=getComputedStyle(e)),typeof n=="undefined"&&(n=t.display),typeof r=="undefined"&&(r=t.position),n==="block"&&!this.isOutOfFlowElement(e,t,n,r)||e.tagName==="BR"&&n!=="none"):!1},isOutOfFlowElement:function(e,t,n,r,i){return e instanceof Element?(typeof t=="undefined"&&(t=getComputedStyle(e)),typeof n=="undefined"&&(n=t.display),typeof r=="undefined"&&(r=t.position),typeof i=="undefined"&&(i=t.float||t.styleFloat||t.cssFloat),r==="absolute"||r==="fixed"||i!=="none"||n==="none"):!1},areInSameSingleLine:function(t,n){function o(e,t,n){return{top:e.top+n,bottom:e.bottom+n,left:e.left+t,right:e.right+t}}if(this.isLineBreakingElement(t))return!1;if(this.isLineBreakingElement(n))return!1;if(t.nextSibling!=n){if(n.nextSibling!=t)throw"I gave up!";var r=t;t=n,n=r}if(this.isOutOfFlowElement(t))return!0;if(!this.isSingleLineOfTextComponent(t))return!1;var i=Node.getBoundingClientRect(t),s=Node.getBoundingClientRect(n);if(t instanceof Element){var u=getComputedStyle(t);i=o(i,parseFloat(u.marginLeft),parseFloat(u.marginTop)),u.position=="relative"&&(i=o(i,parseFloat(u.left),parseFloat(u.top)))}if(n instanceof Element){var a=getComputedStyle(n);s=o(s,parseFloat(a.marginLeft),parseFloat(a.marginTop)),a.position=="relative"&&(s=o(s,parseFloat(a.left),parseFloat(a.top)))}var f=getComputedStyle(t.parentNode).direction=="rtl"?s:i,l=getComputedStyle(t.parentNode).direction=="rtl"?i:s;return f.right<=l.left},isHiddenOverflowing:function(t,n){return t instanceof Element?(typeof n=="undefined"&&(n=getComputedStyle(t).display),n=="hidden"&&t.offsetHeight!=t.scrollHeight):!1},hasBigRadius:function(e,t){if(e instanceof Element){typeof t=="undefined"&&(t=getComputedStyle(e));if("borderTopLeftRadius"in t){var n=parseFloat(t.borderTopLeftRadius),r=parseFloat(t.borderTopRightRadius),i=parseFloat(t.borderBottomLeftRadius),s=parseFloat(t.borderBottomRightRadius);if(n<15&&r<15&&i<15&&s<15)return!1;var o=parseFloat(t.borderTopWidth),u=parseFloat(t.borderBottomWidth),a=parseFloat(t.borderLeftWidth),f=parseFloat(t.borderRightWidth);if(n>o)return!0;if(n>a)return!0;if(r>o)return!0;if(r>f)return!0;if(i>u)return!0;if(i>a)return!0;if(s>u)return!0;if(s>f)return!0}return!1}return!1},isMonolithic:function(t){if(t instanceof Element){var n=getComputedStyle(t),r=n.overflow,i=n.display,s=this.isReplacedElement(t),o=this.isScrollable(t,r),u=this.isSingleLineOfTextComponent(t,n,i,undefined,s),a=this.isHiddenOverflowing(t,r),f=this.hasBigRadius(t,n);return s||o||u||a||f}return!1},isPossibleBreakPoint:function(t,n){if(t instanceof Range){if(!t.collapsed)return!1;var r=t.startContainer;while(r&&r!==n){if(cssBreak.isMonolithic(r))return!1;r=r.parentNode}var r=t.startContainer,i=t.startContainer.childNodes[t.startOffset];while(r&&i!==n){if(i&&i.previousSibling&&this.areInSameSingleLine(i,i.previousSibling))return!1;i=r,r=r.parentNode}if(t.startOffset==0){var s=t.startContainer.childNodes[0];if(!s)return!1;var o=Node.getBoundingClientRect(s),u=t.startContainer.getBoundingClientRect();if(o.top==u.top)return!1}return!0}return!1}};"use strict";var cssRegionsHelpers={getAllLevelPreviousSibling:function(e,t){if(!e||e==t)return null;while(!e.previousSibling){e=e.parentNode;if(!e||e==t)return null}return e.previousSibling},markNodesAsRegion:function(e,t){e.forEach(function(e){e.regionOverset="empty",e.setAttribute("data-css-region",e.cssRegionsLastFlowFromName),cssRegionsHelpers.hideTextNodesFromFragmentSource([e]),e.cssRegionsWrapper=e.cssRegionsWrapper||e.appendChild(document.createElement("cssregion"))})},unmarkNodesAsRegion:function(e,t){e.forEach(function(e){e.regionOverset="fit",e.cssRegionsWrapper&&e.removeChild(e.cssRegionsWrapper),delete e.cssRegionsWrapper,cssRegionsHelpers.unhideTextNodesFromFragmentSource([e]),e.removeAttribute("data-css-region")})},fragmentSourceIndex:0,markNodesAsFragmentSource:function(e,t){function n(e,r){var i,s;switch(e.nodeType){case 1:if(typeof r=="undefined"||!t){var o=e.getAttributeNode("data-css-regions-fragment-source");o||e.setAttribute("data-css-regions-fragment-source",cssRegionsHelpers.fragmentSourceIndex++)}e.setAttribute("data-css-regions-cloning",!0),e.tagName=="OL"&&cssRegionsHelpers.expandListValues(e),typeof r!="undefined"&&e.tagName=="LI"&&cssRegionsHelpers.expandListValues(e.parentNode);case 9:case 11:i=e.firstChild;while(i)s=i.nextSibling,n(i),i=s}}e.forEach(n)},expandListValues:function(e){if(e.getAttribute("data-css-old-start"))return;if(e.hasAttribute("reversed"))var t=e.getAttribute("start")?parseInt(e.getAttribute("start")):e.childElementCount,n=-1;else var t=e.getAttribute("start")?parseInt(e.getAttribute("start")):1,n=1;e.setAttribute("data-css-old-start",t);var r=e.firstElementChild,i=null;while(r)r.tagName==="LI"&&((i=r.getAttributeNode("value"))?(t=parseInt(i.nodeValue),r.setAttribute("data-css-old-value",t)):r.setAttribute("value",t),t+=n),r=r.nextElementSibling},unexpandListValues:function(e){e.removeAttribute("data-css-old-start");var t=e.firstElementChild,n=null;while(t)t.tagName==="LI"&&((n=t.getAttributeNode("data-css-old-value"))?t.removeAttributeNode(n):t.removeAttribute("value")),t=t.nextElementSibling},listOfTextNodesForIE:[],hideTextNodesFromFragmentSource:function(e){function t(e,n){var r,i;switch(e.nodeType){case 3:e.parentNode.getAttribute("data-css-regions-fragment-source")||(e.cssRegionsSavedNodeValue=e.nodeValue,e.nodeValue="",(navigator.userAgent.indexOf("MSIE")>0||navigator.userAgent.indexOf("Trident")>0)&&cssRegionsHelpers.listOfTextNodesForIE.indexOf(e)==-1&&cssRegionsHelpers.listOfTextNodesForIE.push(e));break;case 1:e.removeAttribute("data-css-regions-cloning");if(typeof n=="undefined")return;case 9:case 11:r=e.firstChild;while(r)i=r.nextSibling,t(r),r=i}}e.forEach(t)},unhideTextNodesFromFragmentSource:function(e){function t(e){var n,r;switch(e.nodeType){case 3:"cssRegionsSavedNodeValue"in e&&(e.nodeValue=e.cssRegionsSavedNodeValue,delete e.cssRegionsSavedNodeValue);break;case 1:if(typeof k=="undefined")return;case 9:case 11:n=e.firstChild;while(n)r=n.nextSibling,t(n),n=r}}e.forEach(t)},unmarkNodesAsFragmentSource:function(e){function t(e,n){var r,i;switch(e.nodeType){case 3:"cssRegionsSavedNodeValue"in e&&(e.nodeValue=e.cssRegionsSavedNodeValue,delete e.cssRegionsSavedNodeValue);break;case 1:e.removeAttribute("data-css-regions-fragment-source"),e.tagName=="OL"&&cssRegionsHelpers.unexpandListValues(e),typeof n!="undefined"&&e.tagName=="LI"&&cssRegionsHelpers.expandListValues(e.parentNode);case 9:case 11:r=e.firstChild;while(r)i=r.nextSibling,t(r),r=i}}e.forEach(t)},transformFragmentSourceToFragments:function(e){function t(e){var n,r;switch(e.nodeType){case 1:var i=e.getAttribute("data-css-regions-fragment-source");e.removeAttribute("data-css-regions-fragment-source"),e.removeAttribute("data-css-regions-cloning"),e.setAttribute("data-css-regions-fragment-of",i);case 9:case 11:n=e.firstChild;while(n)r=n.nextSibling,t(n),n=r}}e.forEach(t)},embedTrailingWhiteSpaceNodes:function(e){function n(e){var r,i;switch(e.nodeType){case 3:if(!e.previousSibling){getComputedStyle(e.parentNode).whiteSpace.substring(0,3)!=="pre"&&t.test(e.nodeValue)&&(e.parentNode.setAttribute("data-whitespace-before",e.nodeValue),e.parentNode.removeChild(e));break}if(!e.nextSibling){getComputedStyle(e.parentNode).whiteSpace.substring(0,3)!=="pre"&&t.test(e.nodeValue)&&(e.parentNode.setAttribute("data-whitespace-after",e.nodeValue),e.parentNode.removeChild(e));break}break;case 1:case 9:case 11:r=e.firstChild;while(r)i=r.nextSibling,n(r),r=i}}var t=/^\s*$/;n(e)},unembedTrailingWhiteSpaceNodes:function(e){function n(e){var t,r;switch(e.nodeType){case 1:var i="";(i=e.getAttribute("data-whitespace-before"))&&e.getAttribute("data-starting-fragment")==""&&e.getAttribute("data-special-starting-fragment","")&&e.insertBefore(document.createTextNode(i),e.firstChild),e.removeAttribute("data-whitespace-before"),(i=e.getAttribute("data-whitespace-after"))&&e.getAttribute("data-continued-fragment")==""&&e.getAttribute("data-special-continued-fragment","")&&e.insertAfter(document.createTextNode(i),e.lastChild),e.removeAttribute("data-whitespace-after");case 9:case 11:t=e.firstChild;while(t)r=t.nextSibling,n(t),t=r}}var t=/^\s*$/;n(e)},allCSSProperties:null,getAllCSSProperties:function(){var t=getComputedStyle(document.body),n=new Array(t.length);for(var r=t.length;r--;)n[r]=t[r];return this.allCSSProperties=n},copyStyle:function(e,t){function n(e,t,r){var i,s,o,u;switch(e.nodeType){case 1:var a=e.curentStyle?null:cssCascade.findAllMatchingRules(e),f=cssRegionsHelpers.allCSSProperties||cssRegionsHelpers.getAllCSSProperties();for(var l=f.length;l--;){if(f[l].indexOf("margin")==0){var c=getComputedStyle(e).getPropertyValue(f[l]);t.style.setProperty(f[l],c);continue}var h=cssCascade.getSpecifiedStyle(e,f[l],a);if(h&&h.length)t.style.setProperty(f[l],h.toCSSString());else if(r&&f[l][0]!="-"){var c=getComputedStyle(e).getPropertyValue(f[l]),p=getComputedStyle(e.parentNode).getPropertyValue(f[l]),d=getComputedStyle(document.body).getPropertyValue(f[l]);c==p&&c!=d&&t.style.setProperty(f[l],c)}};case 9:case 11:i=e.firstChild,o=t.firstChild;while(i)s=i.nextSibling,u=o.nextSibling,i.cssRegionsLastFlowIntoName&&i.cssRegionsLastFlowIntoType==="element"?t.removeChild(o):n(i,o),i=s,o=u}}n(e,t,!0)}};"use script";var cssRegions={layoutContent:function(e,t,n){if(!e)return;if(!e.length)return;var r=e.pop();for(;;){var i=getComputedStyle(r).display;if(i=="none"||i.indexOf("inline")!==-1){r=e.pop();continue}break}r.cssRegionsWrapper?(r.cssRegionsWrapper.cssRegionHost=r,r=r.cssRegionsWrapper):r.cssRegionHost=r,r.innerHTML="";if(!t.hasChildNodes())return r.cssRegionsLastOffsetHeight=r.offsetHeight,r.cssRegionsLastOffsetWidth=r.offsetWidth,r.cssRegionHost.regionOverset="empty",cssRegions.layoutContent(e,t),!1;r.appendChild(t);if(e.length!==0)return r.cssRegionHost.scrollHeight!=r.cssRegionHost.offsetHeight?t=this.extractOverflowingContent(r):t=document.createDocumentFragment(),t.hasChildNodes()?r.cssRegionHost.regionOverset="overset":r.cssRegionHost.regionOverset="fit",r.cssRegionHost.cssRegionsLastOffsetHeight=r.cssRegionHost.offsetHeight,r.cssRegionHost.cssRegionsLastOffsetWidth=r.cssRegionHost.offsetWidth,cssRegions.layoutContent(e,t,!0);if(cssCascade.getSpecifiedStyle(r.cssRegionHost,"region-fragment").toCSSString().trim().toLowerCase()=="break"){var s=this.extractOverflowingContent(r).hasChildNodes();return r.cssRegionHost.cssRegionsLastOffsetHeight=r.cssRegionHost.offsetHeight,r.cssRegionHost.cssRegionsLastOffsetWidth=r.cssRegionHost.offsetWidth,s}return r.cssRegionHost.cssRegionsLastOffsetHeight=r.cssRegionHost.offsetHeight,r.cssRegionHost.cssRegionsLastOffsetWidth=r.cssRegionHost.offsetWidth,!1},extractOverflowingContent:function(e,t){cssRegionsHelpers.embedTrailingWhiteSpaceNodes(e);var n=e.cssRegionHost.offsetHeight,r=e.cssRegionHost.offsetWidth,i=e.cssRegionHost.getBoundingClientRect();i={top:i.top,bottom:i.bottom,left:i.left,right:i.right};try{var s=t?document.createRange():document.caretRangeFromPoint(i.left+r-1,i.top+n-1)}catch(o){try{console.error(o.message),console.dir(o)}catch(o){}}if(!s||e!==s.endContainer&&!Node.contains(e,s.endContainer))s&&s.endContainer===e.cssRegionHost&&s.endOffset==s.endContainer.childNodes.length?s.setEnd(e,e.childNodes.length):(s=s||document.createRange(),s.setStart(e,0),s.setEnd(e,0),t=!0);do{var u=s.myGetExtensionRect();while((s.endContainer!=e||s.endOffset!=s.endContainer.childNodes.length)&&u.bottom<=i.top+n)s.myMoveOneCharRight(),u=s.myGetExtensionRect();while((s.endContainer!=e||s.endOffset!=0)&&u.bottom>i.top+n)s.myMoveOneCharLeft(),u=s.myGetExtensionRect();var a=!1;if(!t){var f=s.endContainer;while(f=cssRegionsHelpers.getAllLevelPreviousSibling(f,e))if(Node.getBoundingClientRect(f).bottom>i.top+n){s.setStart(e,0),s.setEnd(e,0),a=!0,t=!0;break}}}while(a);var f=s.endContainer;while(f!==e)cssBreak.isMonolithic(f)&&s.setEndBefore(f),f=f.parentNode;if(!s||e!==s.endContainer&&!Node.contains(e,s.endContainer)){console.dir(s.cloneRange());debugger;s.setStart(e,e.childNodes.length),s.setEnd(e,e.childNodes.length)}var l=s.startContainer.childNodes[s.startOffset],f=l;if(cssBreak.hasAnyInlineFlow(s.startContainer))while(f&&(f=f.previousSibling)){if(!cssBreak.areInSameSingleLine(f,l))break;l=f;if(f instanceof Element)s.setEndBefore(f);else{var c=Node.getClientRects(f);if(c.length>1){var h=c[c.length-2].bottom;s.setEnd(f,f.nodeValue.length);while(u.bottom>h)s.myMoveOneCharLeft(),u=s.myGetExtensionRect();s.endContainer!==f&&s.setEndBefore(f)}else s.setEndBefore(f)}}if(!s||e!==s.endContainer&&!Node.contains(e,s.endContainer)){console.dir(s.cloneRange());debugger;s.setStart(e,e.childNodes.length),s.setEnd(e,e.childNodes.length)}if(s.endContainer===e&&s.endOffset===0&&s.endOffset!==e.childNodes.length)do{s.myMoveOneCharRight();var f=s.endContainer;while(f&&f!==e)cssBreak.isMonolithic(f)&&(s.setStartAfter(f),s.setEndAfter(f)),f=f.parentNode}while(!cssBreak.isPossibleBreakPoint(s,e)&&(s.endContainer!==e||s.endOffset!==e.childNodes.length));if(!s||e!==s.endContainer&&!Node.contains(e,s.endContainer)){console.dir(s.cloneRange());debugger;s.setStart(e,e.childNodes.length),s.setEnd(e,e.childNodes.length)}var f=s.endContainer,p=[];f.nodeType!==f.ELEMENT_NODE&&(f=f.parentNode);while(f!==e)p.push(f),f=f.parentNode;if(s.endOffset==s.endContainer.childNodes.length&&s.endContainer!==e){var d=s.endContainer.getBoundingClientRect(),v=d.bottom-(i.top+n),m=getComputedStyle(s.endContainer),g=parseFloat(m.borderBottomWidth),y=parseFloat(m.paddingBottom),b=v;if(v>g){b=g,v-=b;var w=v;w>y?(w=y,v-=w):v=0}else v=0;if(typeof b=="number"&&b!==0){var E=parseInt(m.borderBottomLeftRadius)>0||parseInt(m.borderBottomRightRadius)>0;E&&(b=g)}}if(s.endOffset==0&&s.endContainer!==e){var d=s.endContainer.getBoundingClientRect(),S=i.top+n-i.top,m=getComputedStyle(s.endContainer),g=parseFloat(m.borderTopWidth),y=parseFloat(m.paddingTop),v=g+y-S;if(v>0){var x=v;if(v>y){x=y,v-=x;var T=v;T>g?(T=g,v-=T):v=0}else v=0}}for(var N=p.length-1;N>=0;N--)p[N].setAttribute("data-css-continued-fragment",!0);typeof b=="number"&&(p[0].removeAttribute("data-css-continued-fragment"),p[0].setAttribute("data-css-special-continued-fragment",!0),p[0].style.borderBottomWidth=g-b+"px"),typeof w=="number"&&(p[0].removeAttribute("data-css-continued-fragment"),p[0].setAttribute("data-css-special-continued-fragment",!0),p[0].style.paddingBottom=y-w+"px"),typeof T=="number"&&(p[0].removeAttribute("data-css-continued-fragment"),p[0].setAttribute("data-css-continued-fragment",!0),p[0].style.borderTopWidth=g-T+"px"),typeof x=="number"&&(p[0].removeAttribute("data-css-continued-fragment"),p[0].setAttribute("data-css-special-continued-fragment",!0),p[0].style.paddingTop=y-x+"px"),s.setEnd(e,e.childNodes.length);var C=s.extractContents(),k=C.querySelectorAll("[data-css-continued-fragment]");for(var N=k.length;N--;)k[N].removeAttribute("data-css-continued-fragment"),k[N].setAttribute("data-css-starting-fragment",!0);var L=C.querySelector("[data-css-special-continued-fragment]");if(L)L.removeAttribute("data-css-special-continued-fragment"),L.setAttribute("data-css-starting-fragment",!0),typeof b=="number"&&(L.style.borderBottomWidth=b+"px"),typeof w=="number"?L.style.paddingBottom=w:L.style.paddingBottom="0px",typeof T=="number"&&(L.removeAttribute("data-css-starting-fragment"),L.setAttribute("data-css-special-starting-fragment",!0),L.style.borderTopWidth=T+"px"),typeof x=="number"&&(L.removeAttribute("data-css-starting-fragment"),L.setAttribute("data-css-special-starting-fragment",!0),L.style.paddingTop=x+"px",L.style.paddingBottom="0px",L.style.borderBottomWidth="0px");else if(typeof b=="number")try{throw new Error}catch(o){setImmediate(function(){throw o})}else if(typeof x=="number")try{throw new Error}catch(o){setImmediate(function(){throw o})}return cssRegionsHelpers.unembedTrailingWhiteSpaceNodes(e),cssRegionsHelpers.unembedTrailingWhiteSpaceNodes(C),C},enablePolyfill:function(){var t=document.createElement("style");t.setAttribute("data-css-no-polyfill",!0),t.textContent="cssregion,[data-css-region]>*,[data-css-regions-fragment-source]:not([data-css-regions-cloning]){display:none !important}[data-css-region]>cssregion:last-of-type{display:inline !important}[data-css-region]{content:normal !important}[data-css-special-continued-fragment]{counter-reset:none !important;counter-increment:none !important;margin-bottom:0 !important;border-bottom-left-radius:0 !important;border-bottom-right-radius:0 !important}[data-css-continued-fragment]{counter-reset:none !important;counter-increment:none !important;margin-bottom:0 !important;padding-bottom:0 !important;border-bottom:none !important;border-bottom-left-radius:0 !important;border-bottom-right-radius:0 !important}[data-css-continued-fragment]::after{content:none !important;display:none !important}[data-css-special-starting-fragment]{text-indent:0 !important;margin-top:0 !important}[data-css-starting-fragment]{text-indent:0 !important;margin-top:0 !important;padding-top:0 !important;border-top:none !important;border-top-left-radius:0 !important;border-top-right-radius:0 !important}[data-css-starting-fragment]::before{content:none !important;display:none !important}";var n=document.head||document.getElementsByTagName("head")[0];n.appendChild(t),cssCascade.startMonitoringProperties(["flow-into","flow-from","region-fragment"],{onupdate:function(t,n){if(t.getAttributeNode("data-css-regions-fragment-of"))return;console.dir({message:"onupdate",element:t,selector:n.selector.toCSSString(),rule:n});var r=null,i=cssCascade.getSpecifiedStyle(t,"flow-into").filter(function(e){return e instanceof cssSyntax.IdentifierToken}),s=i[0]?i[0].toCSSString().toLowerCase():"";s=="none"&&(s="");var o=i[1]?i[1].toCSSString().toLowerCase():"";o!="content"&&(o="element");var i=s+" "+o,u=cssCascade.getSpecifiedStyle(t,"flow-from").filter(function(e){return e instanceof cssSyntax.IdentifierToken}),a=u[0]?u[0].toCSSString().toLowerCase():"";a=="none"&&(a="");var u=a;if(t.cssRegionsLastFlowInto!=i||t.cssRegionsLastFlowFrom!=u){var f=cssRegions.flows[t.cssRegionsLastFlowFromName],l=cssRegions.flows[t.cssRegionsLastFlowIntoName];f&&f.removeFromRegions(t),l&&l.removeFromContent(t),f&&f.relayout(),l&&l.relayout(),t.cssRegionsLastFlowInto=i,t.cssRegionsLastFlowFrom=u,t.cssRegionsLastFlowIntoName=s,t.cssRegionsLastFlowFromName=a,t.cssRegionsLastFlowIntoType=o;if(a){var f=cssRegions.flows[a]=cssRegions.flows[a]||new cssRegions.Flow(a);f&&f.addToRegions(t),f&&f.relayout()}if(s){var l=cssRegions.flows[s]=cssRegions.flows[s]||new cssRegions.Flow(s);l&&l.addToContent(t),l&&l.relayout()}}}}),cssRegions.enablePolyfillObjectModel(),window.addEventListener("load",function(){var e=document.getNamedFlows();for(var t=0;t<e.length;t++)e[t].relayout()}),window.addEventListener("resize",function(){var e=document.getNamedFlows();for(var t=0;t<e.length;t++)e[t].relayoutIfSizeChanged()})},flows:Object.create?Object.create(null):{}};"use strict",cssRegions.Flow=function(t){this.name=t,Object.defineProperty(this,"name",{get:function(){return t}}),this.overset=!1,this.firstEmptyRegionIndex=-1,this.content=this.lastContent=[],this.regions=this.lastRegions=[],this.eventListeners={regionfragmentchange:[],regionoversetchange:[]};var n=this;n.update=function(e){e.schedule(n.update),n.relayout()},cssCascade.addEventListener("stylesheetadded",function(){n.relayout()})},cssRegions.Flow.prototype.removeFromContent=function(e){this.removeEventListenersOf(e);var t=this.content.indexOf(e);t>=0&&this.content.splice(t,1)},cssRegions.Flow.prototype.removeFromRegions=function(e){this.removeEventListenersOf(e);var t=this.regions.indexOf(e);t>=0&&this.regions.splice(t,1)},cssRegions.Flow.prototype.addToContent=function(e){var t=this.content,n=document.createTreeWalker(document.documentElement,NodeFilter.SHOW_ELEMENT,function(e){return t.indexOf(e)>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT},!1);n.currentNode=e,n.nextNode()?t.splice(t.indexOf(n.currentNode),0,e):t.push(e)},cssRegions.Flow.prototype.addToRegions=function(e){var t=this.regions,n=document.createTreeWalker(document.documentElement,NodeFilter.SHOW_ELEMENT,function(e){return t.indexOf(e)>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT},!1);n.currentNode=e,n.nextNode()?t.splice(this.regions.indexOf(n.currentNode),0,e):t.push(e)},cssRegions.Flow.prototype.generateContentFragment=function(){var e=document.createDocumentFragment(),t=this;for(var n=0;n<this.content.length;n++){var r=this.content[n];cssRegionsHelpers.markNodesAsFragmentSource([r],r.cssRegionsLastFlowIntoType=="content");if(r.cssRegionsLastFlowIntoType=="element")e.appendChild(r.cloneNode(!0)),cssRegionsHelpers.copyStyle(r,e.lastChild);else{var i=r.firstChild;while(i)e.appendChild(i.cloneNode(!0)),cssRegionsHelpers.copyStyle(i,e.lastChild),i=i.nextSibling}}return cssRegionsHelpers.hideTextNodesFromFragmentSource(this.content),cssRegionsHelpers.transformFragmentSourceToFragments(Array.prototype.slice.call(e.childNodes,0)),e},cssRegions.Flow.prototype.relayout=function(){var e=this;if(e.relayoutScheduled)return;e.relayoutScheduled=!0,requestAnimationFrame(function(){e._relayout()})},cssRegions.Flow.prototype._relayout=function(){var e=this;try{console.log("starting a new relayout for "+e.name);var t=document.documentElement.scrollTop,n=document.body.scrollTop;e.removeEventListenersOf(e.lastRegions),e.removeEventListenersOf(e.lastContent),cssRegionsHelpers.unmarkNodesAsRegion(e.lastRegions),e.lastRegions=e.regions.slice(0),cssRegionsHelpers.unmarkNodesAsFragmentSource(e.lastContent),e.lastContent=e.content.slice(0),cssRegionsHelpers.markNodesAsRegion(e.regions);var r=e.regions.slice(0).reverse(),i=e.generateContentFragment();e.overset=cssRegions.layoutContent(r,i),e.firstEmptyRegionIndex=e.regions.length-1;while(e.regions[e.firstEmptyRegionIndex]){if(e.regions[e.firstEmptyRegionIndex].cssRegionsWrapper.firstChild){++e.firstEmptyRegionIndex==e.regions.length&&(e.firstEmptyRegionIndex=-1);break}e.firstEmptyRegionIndex--}window.MutationObserver?(e.addEventListenersTo(e.content),e.addEventListenersTo(e.regions)):setImmediate(function(){e.addEventListenersTo(e.content)}),requestAnimationFrame(function(){e.dispatchEvent("regionfragmentchange"),e.dispatchEvent("regionoversetchange")}),document.documentElement.scrollTop=t,document.body.scrollTop=n,e.relayoutScheduled=!1}catch(s){setImmediate(function(){throw s}),requestAnimationFrame(function(){e._relayout()})}},cssRegions.Flow.prototype.relayoutIfSizeChanged=function(){var e=this.regions;for(var t=e.length;t--;)if(e[t].offsetHeight!==e[t].cssRegionsLastOffsetHeight||e[t].offsetWidth!==e[t].cssRegionsLastOffsetWidth){this.relayout();return}},cssRegions.Flow.prototype.addEventListenersTo=function(e){var t=this;e instanceof Element&&(e=[e]),e.forEach(function(e){e.cssRegionsEventStream||(e.cssRegionsEventStream=new myDOMUpdateEventStream({target:e}),e.cssRegionsEventStream.schedule(t.update))})},cssRegions.Flow.prototype.removeEventListenersOf=function(e){var t=this;e instanceof Element&&(e=[e]),e.forEach(function(e){e.cssRegionsEventStream&&(e.cssRegionsEventStream.dispose(),delete e.cssRegionsEventStream)})},cssRegions.NamedFlow=cssRegions.Flow,cssRegions.NamedFlow.prototype.getContent=function(){return this.content.slice(0)},cssRegions.NamedFlow.prototype.getContent=function(){return this.content.slice(0)},cssRegions.NamedFlow.prototype.getRegionsByContent=function(t){var n=[],r=document.querySelectorAll('[data-css-regions-fragment-of="'+t.getAttribute("data-css-regions-fragment-source")+'"]');for(var i=0;i<r.length;i++){var s=r[i];do if(s.getAttribute("data-css-region")){n.push(s);break}while(s=s.parentNode)}return n},basicObjectModel.EventTarget.implementsIn(cssRegions.Flow),cssRegions.NamedFlowCollection=function(){this.length=0},cssRegions.NamedFlowCollection.prototype.namedItem=function(e){return cssRegions.flows[e]||(cssRegions.flows[e]=new cssRegions.Flow(e))},cssRegions.enablePolyfillObjectModel=function(){document.getNamedFlows=function(){var e=new cssRegions.NamedFlowCollection,t=cssRegions.flows;for(var n in cssRegions.flows)Object.prototype.hasOwnProperty.call(t,n)&&(t[n].content.length!=0||t[n].regions.length!=0)&&(e[e.length++]=e[n]=t[n]);return e},document.getNamedFlow=function(e){var t=cssRegions.flows;return t[e]||(t[e]=new cssRegions.NamedFlow(e))},Object.defineProperties(Element.prototype,{regionOverset:{get:function(){return this._regionOverset||"fit"},set:function(e){this._regionOverset=e}},getRegionFlowRanges:{value:function(){return null}},getComputedRegionStyle:{value:function(t,n){var r=document.querySelector('[data-css-regions-fragment-of="'+t.getAttribute("data-css-regions-fragment-source")+'"]');return n?getComputedStyle(r||t):getComputedStyle(r||t,n)}}})},cssRegions.enablePolyfill();